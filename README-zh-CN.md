# umake

一个用于C++构建系统的最小化工具，可以在一定支持范围内自动扫描模块和源文件依赖。目前只提供了cmake的插件。

配置文件和扫描缓存均为可选内容，但前者默认禁用，后者默认启用。

## 注意事项

请尽量少使用一些可能会导致依赖分析错误的代码表达，比如条件包含和条件导入，umake将在标准内尽可能提供正确的行为。

请避免在文件名中使用双下划线（它们被用于根据源文件依赖生成的临时静态库路径中斜线和反斜线的转义），除非您确定不会引发冲突或者关闭了自动源文件依赖分析，否则导致的构建错误将不会被视为本项目的bug，如果确实出现很多同类问题，本项目可能但不一定会加以避免。

如果没有导入源文件对应的头文件（名称相同，后缀名相对应），那么源文件依赖无法被探测到。可以手动添加依赖。

## 使用

### 用于CMake

如例。目标名称和主源文件必须一一对应。

~~~CMake
include(../umake/umake.cmake)
add_moduled_executables_with_a_main_source("../umake/umake.py" main main.cpp tests tests.cpp)
~~~

如果在当前目录下生成过配置文件，则路径名是可选的。

模块化的库（不是模块库）未经测试。

如果您很不巧地删除了预编译过的模块接口文件而没有删除对应中间对象文件，错误将几乎必定发生，请您清理并重新编译项目或者删除对应对象文件。
